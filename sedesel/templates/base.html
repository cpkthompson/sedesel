{% load static wagtailuserbar wagtailcore_tags wagtailsettings_tags sedesel_tags wagtailimages_tags %}
{% get_settings use_default_site=True %}
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8"/>
    <title>
        {% block title %}
            {% if self.seo_title %}{{ self.seo_title }}{% else %}{{ self.title }}{% endif %}
        {% endblock %}
        {% block title_suffix %}
            {% with self.get_site.site_name as site_name %}
                {% if site_name %}- {{ site_name }}{% endif %}
            {% endwith %}
        {% endblock %}
    </title>
    <meta content="" name="description"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>

    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/w3.css' %}">
    <link rel="stylesheet" href="{% static 'css/bulma.min.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.3.7/dist/vuetify.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;900&display=swap"
          rel="stylesheet">
    <style>
        @font-face {
            font-family: 'TTCommons-Regular';
            src: url('{% static 'fonts/tt/TTCommons-Regular.ttf' %}') format('truetype');
        }

        @font-face {
            font-family: 'TTCommons-Bold';
            src: url('{% static 'fonts/tt/TTCommons-Bold.ttf' %}') format('truetype');
        }

        div, body, v-app {
            font-family: "TTCommons-Regular", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif !important;
            font-size: {{ settings.api.Configuration.font_size }};
        }

        h1, h2, h3, h4, h5, h6, strong, .heavy-font {
            font-family: 'Playfair Display', serif, "TTCommons-Bold", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif !important;
            font-weight: 900;
        }

        .light-font {
            font-family: 'Playfair Display', serif, "TTCommons-Bold", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif !important;
            font-weight: 400;
        }

        .bgoverlay {
            background: rgba(0, 0, 0, 0.4);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.js"></script>

    {% block extra_head %}

    {% endblock %}
</head>

<body>
{% wagtailuserbar %}
<div id="app" style="display: none">
    <v-app>
        <v-progress-linear :active="loading" indeterminate style="position: fixed;top: 0;z-index: 100"
                           height="5px"></v-progress-linear>

        {% if messages %}
            {{ message.type }}
            {% for message in messages %}
                <div class="{% if message.level_tag == 'success' %}w3-green{% elif message.level_tag == 'error' %}w3-red{% elif message.level_tag == 'info' %}w3-pale-green{% endif %} w3-padding-large w3-center w3-animate-top trans-400">
                    {{ message|safe }}
                </div>
            {% endfor %}
        {% endif %}
        <nav class="navbar w3-padding" role="navigation"
             style="padding-left: 16px;padding-right: 5px;"
             aria-label="main navigation">
            <div class="navbar-brand">
                <div class="navbar-item is-paddingless">
                    <a class="is-paddingless w3-large"
                       href="/">
                        {% if settings.api.Configuration.logo %}
                            {% image settings.api.Configuration.logo original as logo %}
                            <img src="{{ logo.url }}" style="max-width: 70px">
                            &nbsp;
                        {% endif %}
                        <span class="w3-hide-small menu-label has-text-weight-bold is-marginless w3-text-black">{{ self.get_site.site_name }}</span>
                        <span class="w3-hide-large w3-hide-medium w3-small menu-label has-text-weight-bold is-marginless w3-text-black">{{ self.get_site.site_name }}</span>
                        &nbsp;
                    </a>
                </div>
                &nbsp;
                {% if self.get_site.root_page.show_in_menus or self.get_site.root_page.get_children|show_in_menus %}
                    <a role="button" class="navbar-burger burger w3-round-large" aria-label="menu"
                       aria-expanded="false"
                       data-target="navbarBasicExample">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                {% endif %}
            </div>

            <div id="navbarBasicExample" class="navbar-menu">
                <div class="navbar-end w3-padding-small">
                    {% if self.get_site.root_page.show_in_menus %}
                        <div class="navbar-item is-paddingless">
                            <v-btn :depressed="false" :ripple="false" rounded text
                                   href="{% pageurl self.get_site.root_page %}"
                                   class="has-text-weight-bold w3-center">
                                {{ self.get_site.root_page.title }}
                            </v-btn>
                        </div>
                    {% endif %}
                    {% for child in self.get_site.root_page.get_children %}
                        {% if child.show_in_menus %}
                            <div class="navbar-item is-paddingless">
                                <v-menu :rounded="0">
                                    <template v-slot:activator="{ on, attrs }">
                                        <v-btn :depressed="false" :ripple="false" rounded text
                                                {% if child.get_children %}
                                               v-bind="attrs" v-on="on"
                                                {% else %}
                                               href="{% pageurl child %}"
                                                {% endif %}
                                               class="has-text-weight-bold w3-center">
                                            {{ child.title }}
                                            {% if child.get_children %}
                                                <v-icon>arrow_drop_down</v-icon>
                                            {% endif %}
                                        </v-btn>
                                    </template>
                                    {% if child.get_children %}
                                        <v-list>
                                            {% for grand_child in child.get_children %}
                                                <v-list-item href="{% pageurl grand_child %}">
                                                    <v-list-item-title
                                                            class="w3-left-align is-uppercase">{{ grand_child.title }}</v-list-item-title>
                                                </v-list-item>
                                            {% endfor %}
                                        </v-list>
                                    {% endif %}
                                </v-menu>
                                &nbsp;
                            </div>
                        {% endif %}

                    {% endfor %}
                </div>
            </div>
        </nav>
        {% if page.get_children and False %}
            <div class="w3-padding w3-border-top w3-center"
                 style="overflow-y: auto;white-space: nowrap;border-color: lightgray!important;">
                <v-spacer></v-spacer>
                {% for child in page.get_children %}
                    <v-btn text rounded class="trans-400 w3-large" href="{% pageurl child %}">{{ child.title }}</v-btn>
                {% endfor %}
                <v-spacer></v-spacer>
            </div>
        {% endif %}
        <div style="min-height: 90vh" class="w3-light-grey">
            {% block content %}

            {% endblock %}
        </div>

        <footer class="w3-padding w3-padding-32">
            <div class="container">
                <div class="columns is-multiline is-mobile">
                    <div class="column is-6-mobile">
                        <img src="{{ logo.url }}" style="width: 100px" class="w3-margin-bottom">
                        &nbsp;
                        <h1 class="w3-xlarge w3-margin-bottom">
                            {{ self.get_site.site_name }}
                        </h1>
                        <div>
                            {{ settings.api.Configuration.address_1 }}
                            <br>
                            {% if settings.api.Configuration.address_2 %}
                                {{ settings.api.Configuration.address_2 }}
                                <br>
                            {% endif %}
                            {{ settings.api.Configuration.city }}, {{ settings.api.Configuration.country }}
                        </div>
                    </div>
                    <div class="column is-6-mobile is-hidden-mobile">
                        <br>
                    </div>
                    <div class="column is-6-mobile">
                        <h3 class="w3-margin-bottom">Quick Links</h3>
                        {% for child in self.get_site.root_page.get_children %}
                            {% if child.show_in_menus %}
                                &triangleright;&nbsp;
                                <a href="{% pageurl child %}"
                                   class="footer-link w3-border-bottom w3-border-dark-gray w3-hover-border-white trans-400">{{ child }}</a>
                                <br>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="column is-6-mobile">
                        <h3 class="w3-margin-bottom">We're social</h3>
                        {% if settings.api.Configuration.linkedin %}
                            <a target="_blank" rel="noopener noreferrer nofollow"
                               href="{{ settings.api.Configuration.linkedin }}"
                               class="footer-link w3-border-bottom w3-border-dark-gray w3-hover-border-white trans-400">LinkedIn</a>
                            <br>
                        {% endif %}
                        {% if settings.api.Configuration.facebook %}
                            <a target="_blank" rel="noopener noreferrer nofollow"
                               href="{{ settings.api.Configuration.facebook }}"
                               class="footer-link w3-border-bottom w3-border-dark-gray w3-hover-border-white trans-400">Facebook</a>
                            <br>
                        {% endif %}
                        {% if settings.api.Configuration.twitter %}
                            <a target="_blank" rel="noopener noreferrer nofollow"
                               href="{{ settings.api.Configuration.twitter }}"
                               class="footer-link w3-border-bottom w3-border-dark-gray w3-hover-border-white trans-400">Twitter</a>
                            <br>
                        {% endif %}
                        {% if settings.api.Configuration.instagram %}
                            <a target="_blank" rel="noopener noreferrer nofollow"
                               href="{{ settings.api.Configuration.instagram }}"
                               class="footer-link w3-border-bottom w3-border-dark-gray w3-hover-border-white trans-400">Instagram</a>
                            <br>
                        {% endif %}
                        <br>
                        <br>
                    </div>
                </div>
                <div class="w3-center w3-opacity">
                    <small>
                        © {{ current_year }} {{ self.get_site.site_name }}. All
                        rights reserved
                        <br>
                    </small>
                </div>

            </div>
        </footer>
    </v-app>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {

        // Get all "navbar-burger" elements
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

        // Check if there are any navbar burgers
        if ($navbarBurgers.length > 0) {

            // Add a click event on each of them
            $navbarBurgers.forEach(el => {
                el.addEventListener('click', () => {

                    // Get the target from the "data-target" attribute
                    const target = el.dataset.target;
                    const $target = document.getElementById(target);

                    // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                    el.classList.toggle('is-active');
                    $target.classList.toggle('is-active');

                });
            });
        }

    });

    let vueApp = new Vue({
        el: '#app',
        vuetify: new Vuetify(),
        delimiters: ['[[', ']]'],
        data() {
            return {
                loading: false,
            };
        },
        watch: {},
        computed: {},
        mounted: function () {
            document.getElementById('app').style.display = '';
        },
        methods: {
            goTo(url) {
                window.location.href = url;
            },
        }
    });
</script>
{% block extra_body %}
{% endblock %}
</body>
</html>
